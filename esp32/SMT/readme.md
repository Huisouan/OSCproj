# SMT自动贴片


SMT贴片分位上位机和控制器两部分，上位机是SMT贴片的主控软件，控制器是SMT贴片的执行器。

## 上位机
上位机负责控制贴片机的执行，并接收贴片机的反馈信号。

### 上位机流程
    1.开启软件界面，检测各相机信息，保存各相机状态。
    2.setup：
        1.向下位机发送联络信号，获取控制器状态
        2.启动初始化程序，进行自校准，自校准后，贴片头回到世界坐标系原点进行等待。
        3.
    3.初始化结束后，下拉菜单导入坐标文件，将元器件的坐标数据，封装数据显示在界面中，支持原件按照多种方式重排序，并等待定义料盘数据。
    4.手动定义料盘数据
    5.使用yolo检测料盘以及料板位置，记录料盘和料板的原点信息，将已经上好的料的信息记录下来，填入到原件数据中。
    6.开始贴片
        贴片步骤：
            1.将元件按照上料的料盘顺序来贴装，从左到右，从上到下
            2.读取一个原件的信息，将相机移动到对应料盘粗略位置拍照，使用yolo检测原件位置，记录原件位置信息
            3.将吸嘴移动到元件位置，捡拾原件
            4.将吸嘴移动到检测灯位置
            5.使用yolo检测原件与吸嘴的位置差，将偏差加入到元件位置信息中
            6.将吸嘴移动到料板位置，安装元件，并移动到下一个原件中，如果没有原件则回到原点。
            7.料板相机裁剪料板上的原件是否有缺陷（位置偏差较大），如果有缺陷，将缺陷写入日志中，在屏幕上输出。
            8.更新元件信息。

    